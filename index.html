<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mail Triage</title>
  <link rel="stylesheet" href="theme.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="color-scheme" content="light dark" />
</head>

<body class="bg-gray-50 text-gray-900">
  <!-- Header -->
  <header style="position: relative;">
    <div class="max-w-7xl mx-auto h-16 px-4 sm:px-6 lg:px-8 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="h-8 w-8 rounded"
          style="background: var(--color-primary); color: #fff; display: grid; place-items: center; font-weight: bold;">
          M</div>
        <span class="text-lg font-semibold tracking-tight">Mail Triage</span>
      </div>
      <div class="flex gap-2">
        <button id="clear-storage-btn" class="header-btn" title="Clear Local Storage">
          <span class="button-top flex items-center">
            üóëÔ∏è <span class="ml-1">Clear List</span>
          </span>
        </button>
        <button id="new-email-btn" class="header-btn" title="Add New Email">
          <span class="button-top flex items-center">
            ‚ûï <span class="ml-1">Add new Email</span>
          </span>
        </button>
      </div>
    </div>
    <button id="theme-toggle-btn" class="header-btn" title="Toggle Theme"
      style="position: absolute; right: 2vw; top: 50%; transform: translateY(-50%); z-index: 20;">
      <span class="button-top">üåì</span>
    </button>
  </header>

  <!-- Main -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="grid grid-cols-5 gap-6" style="height: calc(100vh - 4rem);">
      <!-- Left panel: list -->
      <aside class="col-span-5 md:col-span-2 overflow-hidden pt-6">
        <div class="h-full flex flex-col rounded-lg border border-gray-200 bg-white">
          <div class="px-4 py-3 border-b border-gray-100 flex items-center justify-between">
            <h2 class="text-sm font-semibold text-gray-700">Emails</h2>
            <span id="email-count" class="text-xs text-gray-500"></span>
          </div>
          <div id="email-list" class="flex-1 overflow-y-auto divide-y divide-gray-100">
            <!-- Cards injected by JS -->
          </div>
        </div>
      </aside>

      <!-- Right panel: details / compose -->
      <section class="col-span-5 md:col-span-3 overflow-y-auto pt-6">
        <div class="rounded-lg border border-gray-200 bg-white shadow-sm">
          <!-- Details View -->
          <div id="details-view">
            <div class="px-5 py-4 border-b border-gray-100 flex items-start justify-between gap-4">
              <div class="flex-1">
                <h1 id="detail-subject" class="text-lg font-semibold text-gray-900">Select an email</h1>
                <p id="detail-meta" class="text-sm text-gray-500 mt-0.5">‚Äî</p>
              </div>
              <div class="flex items-center gap-2">
                <span id="detail-badge"
                  class="inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs font-medium bg-gray-100 text-gray-700">‚Äî</span>
              </div>
            </div>

            <div class="px-5 py-5 space-y-6">
              <article>
                <h3 class="text-sm font-semibold text-gray-700 mb-2">Email</h3>
                <div id="detail-body"
                  class="prose prose-sm max-w-none text-gray-800 whitespace-pre-wrap leading-relaxed">
                  Choose an email from the list to view its contents.
                </div>
              </article>

              <article>
                <h3 class="text-sm font-semibold text-gray-700 mb-2">AI Suggested Response</h3>
                <div id="detail-response" class="p-4 rounded-md bg-blue-50 text-blue-900 text-sm whitespace-pre-wrap">
                </div>
                <div id="detail-actions" class="mt-3 flex items-center gap-2">
                  <button id="retry-btn"
                    class="hidden inline-flex items-center gap-2 px-3 py-1.5 rounded-md bg-white border border-gray-300 text-gray-700 text-xs hover:bg-gray-50">
                    Retry
                  </button>
                </div>
              </article>
            </div>
          </div>

          <!-- Compose View -->
          <div id="compose-view" class="hidden">
            <div class="px-5 py-4 border-b border-gray-100">
              <h2 class="text-lg font-semibold text-gray-900">New Email</h2>
              <p class="text-sm text-gray-500 mt-0.5">Create a new email by typing or uploading a file.</p>
            </div>
            <div class="px-5 py-5 space-y-5">
              <div class="space-y-2">
                <label for="compose-title" class="text-sm font-medium text-gray-700 bg-white">Title</label>
                <input id="compose-title" type="text" placeholder="Enter email title"
                  class="w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
              </div>

              <div class="space-y-2">
                <label for="compose-body" class="text-sm font-medium text-gray-700 bg-white">Content</label>
                <textarea id="compose-body" rows="10" placeholder="Write email content or upload a file..."
                  class="w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></textarea>
              </div>

              <div class="space-y-2">
                <label class="text-sm font-medium text-gray-700 bg-white">Upload (.txt or .pdf)</label>
                <div id="upload-drop"
                  class="border-2 border-dashed border-gray-300 rounded-md p-5 text-center hover:border-blue-400 transition bg-gray-50">
                  <p class="text-sm text-gray-600">Drag & drop a file here, or</p>
                  <div class="mt-2">
                    <input id="upload-input" type="file" accept=".txt,.pdf" class="hidden" />
                    <button id="upload-select" type="button"
                      class="px-3 py-1.5 text-sm rounded-md bg-white border border-gray-300 hover:bg-gray-50">Select
                      file</button>
                  </div>
                  <p id="upload-filename" class="mt-2 text-xs text-gray-500"></p>
                </div>
              </div>

              <div class="pt-2">
                <button id="save-email-btn"
                  class="inline-flex items-center gap-2 px-4 py-2 rounded-md bg-blue-600 text-white text-sm hover:bg-blue-700 active:bg-blue-800 transition shadow-sm">Save
                  Email</button>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script src="api.js"></script>
  <script src="app.js"></script>
</body>

</html>